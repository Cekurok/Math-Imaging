<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>imtools</title>
    
    <link rel="stylesheet" href="../_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
  </head>
  <body role="document">
      <div class="header" role="banner"><h1 class="heading"><a href="../index.html">
          <span></span></a></h1>
        <h2 class="heading"><span>imtools</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        <a class="uplink" href="../index.html">Contents</a>
        </p>

      </div>
      <div class="content">
        
        
  <h1>Source code for imtools</h1><div class="highlight"><pre>
<span></span><span class="c1"># imtools.py - Simple but often used load/save/show routines for images</span>
<span class="c1"># </span>
<span class="c1"># Author: Stefan Fuertinger [stefan.fuertinger@gmx.at]</span>
<span class="c1"># Created: June 13 2012</span>
<span class="c1"># Last modified: &lt;2017-09-21 11:15:41&gt;</span>

<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">division</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">from</span> <span class="nn">glob</span> <span class="k">import</span> <span class="n">glob</span>
<span class="kn">from</span> <span class="nn">string</span> <span class="k">import</span> <span class="n">join</span>

<span class="c1">##########################################################################################</span>
<div class="viewcode-block" id="imwrite"><a class="viewcode-back" href="../_stubs/imtools.imwrite.html#imtools.imwrite">[docs]</a><span class="k">def</span> <span class="nf">imwrite</span><span class="p">(</span><span class="n">figobj</span><span class="p">,</span><span class="n">fstr</span><span class="p">,</span><span class="n">dpi</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Save a Matplotlib figure camera-ready using a &quot;tight&quot; bounding box</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    figobj : Matplotlib figure</span>
<span class="sd">        Matplotlib figure object to be saved</span>
<span class="sd">    fstr : string</span>
<span class="sd">        String holding the filename to be used to save the figure. If </span>
<span class="sd">        a specific file format is wanted, provide it with `fstr`, e.g., </span>
<span class="sd">        `fstr = &#39;output.tiff&#39;`. If `fstr` does not contain a filename extension</span>
<span class="sd">        the Matplotlib default (png) will be used. </span>
<span class="sd">    dpi : integer</span>
<span class="sd">        The wanted resolution of the output in dots per inch. If `None` the </span>
<span class="sd">        Matplotlib default will be used. </span>
<span class="sd">       </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Nothing : None</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    This is a humble attempt to get rid of the huge white areas around plots </span>
<span class="sd">    that are generated by Matplotlib&#39;s `savefig` when saving a figure as an </span>
<span class="sd">    image using default values. It tries to mimic </span>
<span class="sd">    `export_fig for MATLAB &lt;http://www.mathworks.com/matlabcentral/fileexchange/23629-export-fig&gt;`_. </span>
<span class="sd">    The result, however, is not perfect yet...</span>

<span class="sd">    See also</span>
<span class="sd">    --------</span>
<span class="sd">    savefig : in the `Matplotlib documentation &lt;http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.savefig&gt;`_</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Check if `figobj` is really a figure</span>
    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">figobj</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">!=</span> <span class="s2">&quot;Figure&quot;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;figobj has to be a valid matplotlib Figure object!&quot;</span><span class="p">)</span>

    <span class="c1"># Make sure `fstr` doesn&#39;t contain weirdness and points to an existing place</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fstr</span><span class="p">,(</span><span class="nb">str</span><span class="p">,</span><span class="n">unicode</span><span class="p">)):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Output filename has to be a string!&quot;</span><span class="p">)</span>
    <span class="n">fstr</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">fstr</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">fstr</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">fstr</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s1">&#39;~&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">fstr</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
    <span class="n">slash</span> <span class="o">=</span> <span class="n">fstr</span><span class="o">.</span><span class="n">rfind</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">sep</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">slash</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">fstr</span><span class="p">[:</span><span class="n">slash</span><span class="p">]):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Invalid path for output file: &#39;</span><span class="o">+</span><span class="n">fstr</span><span class="o">+</span><span class="s1">&#39;!&#39;</span><span class="p">)</span>

    <span class="c1"># Check if filename extension has been provided</span>
    <span class="n">dt</span> <span class="o">=</span> <span class="n">fstr</span><span class="o">.</span><span class="n">rfind</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">dt</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="n">fname</span> <span class="o">=</span> <span class="n">fstr</span><span class="o">+</span><span class="s1">&#39;.png&#39;</span>
        <span class="n">ext</span>   <span class="o">=</span> <span class="s1">&#39;png&#39;</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">fstr</span><span class="p">[</span><span class="n">dt</span><span class="o">+</span><span class="mi">1</span><span class="p">:])</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span> 
        <span class="nb">print</span> <span class="s2">&quot;Invalid filename extension: &quot;</span><span class="o">+</span><span class="n">fstr</span><span class="p">[</span><span class="n">dt</span><span class="p">:]</span><span class="o">+</span><span class="s2">&quot; Defaulting to png...&quot;</span>
        <span class="n">fname</span> <span class="o">=</span> <span class="n">fstr</span><span class="p">[:</span><span class="n">dt</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;.png&#39;</span>
        <span class="n">ext</span>   <span class="o">=</span> <span class="s1">&#39;png&#39;</span>
    <span class="k">else</span><span class="p">:</span> 
        <span class="n">fname</span> <span class="o">=</span> <span class="n">fstr</span>
        <span class="n">ext</span>   <span class="o">=</span> <span class="n">fstr</span><span class="p">[</span><span class="n">dt</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span>

    <span class="c1"># Save the figure using &quot;tight&quot; options for the bounding box</span>
    <span class="n">figobj</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span><span class="n">bbox_inches</span><span class="o">=</span><span class="s2">&quot;tight&quot;</span><span class="p">,</span><span class="n">ppad_inches</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">dpi</span><span class="o">=</span><span class="n">dpi</span><span class="p">,</span><span class="nb">format</span><span class="o">=</span><span class="n">ext</span><span class="p">)</span>

    <span class="k">return</span></div>

<span class="c1">##########################################################################################</span>
<div class="viewcode-block" id="normalize"><a class="viewcode-back" href="../_stubs/imtools.normalize.html#imtools.normalize">[docs]</a><span class="k">def</span> <span class="nf">normalize</span><span class="p">(</span><span class="n">I</span><span class="p">,</span><span class="n">a</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">b</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Re-scale a NumPy ndarray</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    I: NumPy ndarray</span>
<span class="sd">        Array to be normalized</span>
<span class="sd">    a : float</span>
<span class="sd">        The lower normalization bound. </span>
<span class="sd">        By default `a = 0` (`a` has to satisfy `a &lt; b`)</span>
<span class="sd">    b : float</span>
<span class="sd">        The upper normalization bound. </span>
<span class="sd">        By default `b = 1` (`b` has to satisfy `b &lt; a`)</span>
<span class="sd">       </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    In : NumPy ndarray</span>
<span class="sd">        Scaled version of the input array `I`, such that `a = In.min()` and </span>
<span class="sd">        `b = In.max()`</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; I = array([[-1,.2],[100,0]])</span>
<span class="sd">    &gt;&gt;&gt; In = normalize(I,a=-10,b=12)</span>
<span class="sd">    &gt;&gt;&gt; In </span>
<span class="sd">        array([[-10.        ,  -9.73861386],</span>
<span class="sd">               [ 12.        , -10.        ]])</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Ensure that `I` is a NumPy-ndarray</span>
    <span class="k">try</span><span class="p">:</span> <span class="n">tmp</span> <span class="o">=</span> <span class="n">I</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;I has to be a NumPy ndarray!&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">tmp</span><span class="p">):</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;I has to be a NumPy ndarray of size &gt; 1!&#39;</span><span class="p">)</span>

    <span class="c1"># If normalization bounds are user specified, check them</span>
    <span class="k">try</span><span class="p">:</span> <span class="n">tmp</span> <span class="o">=</span> <span class="n">b</span> <span class="o">&lt;=</span> <span class="n">a</span>
    <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;a and b have to be scalars satisfying a &lt; b!&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">tmp</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;a has to be strictly smaller than b!&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">absolute</span><span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="n">b</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">np</span><span class="o">.</span><span class="n">finfo</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span><span class="o">.</span><span class="n">eps</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;|a-b|&lt;eps, no normalization possible&#39;</span><span class="p">)</span>

    <span class="c1"># Get min and max of I</span>
    <span class="n">Imin</span>   <span class="o">=</span> <span class="n">I</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
    <span class="n">Imax</span>   <span class="o">=</span> <span class="n">I</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>

    <span class="c1"># If min and max values of I are identical do nothing, if they differ close to machine precision abort</span>
    <span class="k">if</span> <span class="n">Imin</span> <span class="o">==</span> <span class="n">Imax</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">I</span>
    <span class="k">elif</span> <span class="n">np</span><span class="o">.</span><span class="n">absolute</span><span class="p">(</span><span class="n">Imin</span> <span class="o">-</span> <span class="n">Imax</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">np</span><span class="o">.</span><span class="n">finfo</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span><span class="o">.</span><span class="n">eps</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;|Imin-Imax|&lt;eps, no normalization possible&#39;</span><span class="p">)</span>

    <span class="c1"># Make a local copy of I</span>
    <span class="n">I</span> <span class="o">=</span> <span class="n">I</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="c1"># Here the normalization is done</span>
    <span class="n">I</span> <span class="o">=</span> <span class="p">(</span><span class="n">I</span> <span class="o">-</span> <span class="n">Imin</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">b</span> <span class="o">-</span> <span class="n">a</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">Imax</span> <span class="o">-</span> <span class="n">Imin</span><span class="p">)</span> <span class="o">+</span> <span class="n">a</span>

    <span class="c1"># Return normalized array</span>
    <span class="k">return</span> <span class="n">I</span></div>

<span class="c1">##########################################################################################</span>
<div class="viewcode-block" id="blendedges"><a class="viewcode-back" href="../_stubs/imtools.blendedges.html#imtools.blendedges">[docs]</a><span class="k">def</span> <span class="nf">blendedges</span><span class="p">(</span><span class="n">Im</span><span class="p">,</span><span class="n">chim</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Superimpose a (binary) edge set on an gray-scale image using Matplotlib&#39;s `imshow`</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    Im: NumPy 2darray</span>
<span class="sd">        Grayscale image (has to be a 2D array)</span>
<span class="sd">    chim: NumPy 2darray</span>
<span class="sd">        Binary edge map (has to be a 2D array). Note that the edge map must be binary, i.e., </span>
<span class="sd">        it must only contain the values 0 and 1</span>
<span class="sd">       </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Nothing : None</span>

<span class="sd">    See also</span>
<span class="sd">    --------</span>
<span class="sd">    imshow : in the `Matplotlib documentation &lt;http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.imshow&gt;`_</span>
<span class="sd">    Stackoverflow : `This submission &lt;http://stackoverflow.com/questions/2495656/variable-alpha-blending-in-pylab&gt;`_ illustrates how to use variable alpha blending in Matplotlib</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Sanity checks</span>
    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">Im</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">!=</span> <span class="s2">&quot;ndarray&quot;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Im has to be a NumPy ndarray!&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">Im</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Im has to be 2-dimensional!&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span> <span class="n">Im</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Im has to be an image!&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">Im</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">==</span> <span class="kc">True</span> <span class="ow">or</span> <span class="n">np</span><span class="o">.</span><span class="n">isinf</span><span class="p">(</span><span class="n">Im</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Im must not contain NaNs or Infs!&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">chim</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">!=</span> <span class="s2">&quot;ndarray&quot;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;chim has to be a NumPy ndarray!&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">chim</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;chim has to be 2-dimensional!&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span> <span class="n">chim</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;chim has to be an edge map!&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">chim</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">==</span> <span class="kc">True</span> <span class="ow">or</span> <span class="n">np</span><span class="o">.</span><span class="n">isinf</span><span class="p">(</span><span class="n">chim</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;chim must not contain NaNs or Infs!&quot;</span><span class="p">)</span>
        <span class="n">chim</span> <span class="o">=</span> <span class="n">chim</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
        <span class="n">chiu</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">chim</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">chiu</span><span class="o">.</span><span class="n">size</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;chim has to be binary!&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">chiu</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">chiu</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;chim has to be a binary edge map!&quot;</span><span class="p">)</span>

    <span class="c1"># Now do something</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">Im</span><span class="p">,</span><span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">,</span><span class="n">interpolation</span><span class="o">=</span><span class="s2">&quot;nearest&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">hold</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">mycmap</span><span class="p">(</span><span class="n">chim</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s2">&quot;off&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

    <span class="k">return</span></div>

<span class="c1">##########################################################################################</span>
<span class="k">def</span> <span class="nf">mycmap</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate a custom color map, setting alpha values to one on edge</span>
<span class="sd">    points, and to zero otherwise</span>
<span class="sd">    </span>
<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    This code is based on the suggestion found at this </span>
<span class="sd">    `Stackoverflow thread &lt;http://stackoverflow.com/questions/2495656/variable-alpha-blending-in-pylab &gt;`</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Convert edge map to Matplotlib colormap (shape (N,N,4))</span>
    <span class="n">tmp</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">hsv</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="c1"># Set alpha values to one on edge points</span>
    <span class="n">tmp</span><span class="p">[:,:,</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span>

    <span class="k">return</span> <span class="n">tmp</span>


<span class="c1">##########################################################################################</span>
<div class="viewcode-block" id="recmovie"><a class="viewcode-back" href="../_stubs/imtools.recmovie.html#imtools.recmovie">[docs]</a><span class="k">def</span> <span class="nf">recmovie</span><span class="p">(</span><span class="n">figobj</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">movie</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">savedir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fps</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Save Matplotlib figures and generate a movie sequences </span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    figobj : Matplotlib figure</span>
<span class="sd">        Figure to base the movie on</span>
<span class="sd">    movie : str </span>
<span class="sd">        Filename of the generated movie</span>
<span class="sd">    savedir : str</span>
<span class="sd">        Output directory for video file or name of directory of/for source image files</span>
<span class="sd">    fps : int</span>
<span class="sd">        Target frames per second</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Nothing : None</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    The command </span>

<span class="sd">    &gt;&gt;&gt; recmovie(figobj) </span>

<span class="sd">    saves the Matplotlib figure-object `figobj` in the default directory `_tmp` as png-image. </span>
<span class="sd">    If the default directory is empty the image will be named `_tmp0000.png`, </span>
<span class="sd">    otherwise the highest number in the png-file-names incremented by one will be</span>
<span class="sd">    used as filename. </span>

<span class="sd">    Use </span>

<span class="sd">    &gt;&gt;&gt; recmovie(figobj,savedir=&quot;somedir&quot;) </span>

<span class="sd">    to save the Matplotlib figure-object `figobj` in the directory defined by the string </span>
<span class="sd">    `savedir`. If the directory does not exist, it will be created. </span>
<span class="sd">    If the directory `savedir` is empty the image will be named `_tmp0000.png`, otherwise the </span>
<span class="sd">    highest number in the png-file-names incremented by one will be used as filename. </span>

<span class="sd">    The command `recmovie()` will attempt to use `mencoder &lt;http://en.wikipedia.org/wiki/MEncoder&gt;`_</span>
<span class="sd">    to generate an avi-movie composed of the </span>
<span class="sd">    png-images found in the default directory `_tmp`. The movie&#39;s default name will be</span>
<span class="sd">    composed of the default prefix `_tmp` and the current date and time. </span>
<span class="sd">    After the movie has been generated the default-directory `_tmp` and its contents </span>
<span class="sd">    will be deleted. </span>

<span class="sd">    Use </span>

<span class="sd">    &gt;&gt;&gt; recmovie(movie=&quot;somename&quot;) </span>

<span class="sd">    to launch mencoder and generate an avi-video composed of the png-images found in the </span>
<span class="sd">    default directory `_tmp`. </span>
<span class="sd">    The string `movie` will be used as filename for the generated movie (in the above example</span>
<span class="sd">    a file `somename.avi` will be created). </span>
<span class="sd">    After the movie has been generated the default-directory `_tmp` and its contents </span>
<span class="sd">    will be deleted. Similarly </span>

<span class="sd">    &gt;&gt;&gt; recmovie(savedir=&quot;somedir&quot;) </span>

<span class="sd">    will generate an avi-movie composed of the png-images found in the directory specified </span>
<span class="sd">    by the string `savedir`. The movie&#39;s name is given by the prefix `_tmp` and the current </span>
<span class="sd">    date and time. </span>
<span class="sd">    After the movie has been generated it will be moved to the directory `savedir`. If </span>
<span class="sd">    a movie-file of the same name exists in `savedir` a *WARNING* is printed and the movie </span>
<span class="sd">    will not be moved. Analogously, </span>

<span class="sd">    &gt;&gt;&gt; recmovie(movie=&quot;somename&quot;,savedir=&quot;somedir&quot;) </span>

<span class="sd">    will generate an avi-movie named &quot;somename&quot; composed of the png-images found in the </span>
<span class="sd">    directory specified by the string `savedir`. </span>
<span class="sd">    After the movie has been generated it will be moved to the directory `savedir`. If </span>
<span class="sd">    a movie-file of the same name exists in `savedir` a *WARNING* is printed and the movie </span>
<span class="sd">    will not be moved. </span>

<span class="sd">    **Note:** the command </span>

<span class="sd">    &gt;&gt;&gt; recmovie(figobj,movie=&quot;somename&quot;,savedir=&quot;somedir&quot;) </span>

<span class="sd">    will ONLY save the Matplotlib-figure-object `figobj` in the directory defined by the </span>
<span class="sd">    string `savdir`. The optional argument `movie` will be ignored. </span>

<span class="sd">    **Note:** the default-directory, image-format and movie-type can be changed in the source code </span>
<span class="sd">    by editing the variables `prefix`, `imgtype` and `movtype`. </span>

<span class="sd">    See also</span>
<span class="sd">    --------</span>
<span class="sd">    Matplotlib : a `collection of codes &lt;http://matplotlib.org/examples/animation/index.html&gt;`_ illustrating how to use animation in Matplotlib </span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Set default values</span>
    <span class="n">prefix</span>    <span class="o">=</span> <span class="s2">&quot;_tmp&quot;</span>
    <span class="n">numdigits</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%04d</span><span class="s2">&quot;</span>
    <span class="n">imgtype</span>   <span class="o">=</span> <span class="s2">&quot;png&quot;</span>
    <span class="n">movtype</span>   <span class="o">=</span> <span class="s2">&quot;avi&quot;</span>
    <span class="n">fpsno</span>     <span class="o">=</span> <span class="mi">25</span>
    
    <span class="n">now</span>         <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="n">savedirname</span> <span class="o">=</span> <span class="n">prefix</span>
    <span class="n">moviename</span>   <span class="o">=</span> <span class="s2">&quot;movie&quot;</span><span class="o">+</span><span class="s2">&quot;_&quot;</span><span class="o">+</span><span class="nb">repr</span><span class="p">(</span><span class="n">now</span><span class="o">.</span><span class="n">hour</span><span class="p">)</span><span class="o">+</span><span class="nb">repr</span><span class="p">(</span><span class="n">now</span><span class="o">.</span><span class="n">minute</span><span class="p">)</span><span class="o">+</span><span class="nb">repr</span><span class="p">(</span><span class="n">now</span><span class="o">.</span><span class="n">second</span><span class="p">)</span>

    <span class="c1"># Assign defaults</span>
    <span class="k">if</span> <span class="n">movie</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">movie</span> <span class="o">=</span> <span class="n">moviename</span>
    <span class="k">if</span> <span class="n">savedir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">savedir</span> <span class="o">=</span> <span class="n">savedirname</span>
    <span class="k">if</span> <span class="n">fps</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">fps</span> <span class="o">=</span> <span class="n">fpsno</span>

    <span class="c1"># Make sure `figobj` is actually a figure</span>
    <span class="k">if</span> <span class="n">figobj</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">figobj</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">!=</span> <span class="s2">&quot;Figure&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;figobj has to be a valid Matplotlib Figure object!&quot;</span><span class="p">)</span>

    <span class="c1"># Check if movie filename makes sense and points to an existing location</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">movie</span><span class="p">,(</span><span class="nb">str</span><span class="p">,</span><span class="n">unicode</span><span class="p">)):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Output filename for movie has to be a string!&quot;</span><span class="p">)</span>
    <span class="n">movie</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">movie</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">movie</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">movie</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s1">&#39;~&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">movie</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">movie</span><span class="p">[:</span><span class="n">movie</span><span class="o">.</span><span class="n">rfind</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">sep</span><span class="p">)]):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Invalid path for output filename for movie: &#39;</span><span class="o">+</span><span class="n">movie</span><span class="o">+</span><span class="s1">&#39;!&#39;</span><span class="p">)</span>

    <span class="c1"># Make sure `savedir` exists</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">savedir</span><span class="p">,(</span><span class="nb">str</span><span class="p">,</span><span class="n">unicode</span><span class="p">)):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Output filename has to be a string!&#39;</span><span class="p">)</span>
    <span class="n">savedir</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">savedir</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">savedir</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">savedir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s1">&#39;~&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">savedir</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">savedir</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Invalid path for output file: &#39;</span><span class="o">+</span><span class="n">savedir</span><span class="o">+</span><span class="s1">&#39;!&#39;</span><span class="p">)</span>
        
    <span class="c1"># Convert possible float argument to integer, if it does not work raise a TypeError</span>
    <span class="k">try</span><span class="p">:</span> 
        <span class="n">fps</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">fps</span><span class="p">)</span> 
    <span class="k">except</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;fps has to be an integer (see man mencoder for details)!&quot;</span><span class="p">)</span>

    <span class="c1"># Check if mencoder is available</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;which mencoder &gt; /dev/null&quot;</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">WARNING: mencoder was not found on your system - movie generation won&#39;t work!!!</span><span class="se">\n\n</span><span class="s2">&quot;</span>

    <span class="c1"># Check if movie already exists, if yes abort</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">glob</span><span class="p">(</span><span class="n">movie</span><span class="p">))</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">errormsg</span> <span class="o">=</span> <span class="s2">&quot;Movie </span><span class="si">%s</span><span class="s2"> already exists! Aborting...&quot;</span><span class="o">%</span><span class="n">savedir</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">errormsg</span><span class="p">)</span>

    <span class="c1"># If not already existent, create directory savedir</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">glob</span><span class="p">(</span><span class="n">savedir</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">savedir</span><span class="p">)</span>

    <span class="c1"># If a none-default savedir was chosen, automatically keep images</span>
    <span class="c1"># and move movie to this non-standard savedir</span>
    <span class="k">if</span> <span class="n">savedir</span> <span class="o">!=</span> <span class="n">savedirname</span><span class="p">:</span>
        <span class="n">keepimgs</span>  <span class="o">=</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">keepimgs</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># List all imgtype-files in directory savedir</span>
    <span class="n">filelist</span> <span class="o">=</span> <span class="n">glob</span><span class="p">(</span><span class="n">savedir</span><span class="o">+</span><span class="n">os</span><span class="o">.</span><span class="n">sep</span><span class="o">+</span><span class="s2">&quot;*.&quot;</span><span class="o">+</span><span class="n">imgtype</span><span class="p">)</span>

    <span class="c1"># If we have been called with a figobj save it in savedir</span>
    <span class="k">if</span> <span class="n">figobj</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>

        <span class="c1"># If there are already imgtype-files in the directory then filelist!=0</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">filelist</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>

            <span class="c1"># Sort filelist, s.t. the file having the highest no. is the last element</span>
            <span class="n">filelist</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
            <span class="n">scounter</span> <span class="o">=</span> <span class="n">filelist</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

            <span class="c1"># Remove the path and prefix from the last elements filename</span>
            <span class="n">scounter</span> <span class="o">=</span> <span class="n">scounter</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">savedir</span><span class="o">+</span><span class="n">os</span><span class="o">.</span><span class="n">sep</span><span class="o">+</span><span class="n">prefix</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

            <span class="c1"># Split the name further s.t. it is only number+imgtype</span>
            <span class="n">scounter</span> <span class="o">=</span> <span class="n">scounter</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

            <span class="c1"># Convert the string holding the file&#39;s no. to an integer</span>
            <span class="n">counter</span>  <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">scounter</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>

        <span class="c1"># No files are present in savedir, start with 0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c1"># Generate the name the file is stored under (prefix+numdigits(counter).imgtype, e.g. _tmp0102.png)</span>
        <span class="n">fname</span> <span class="o">=</span> <span class="n">savedir</span><span class="o">+</span><span class="n">os</span><span class="o">.</span><span class="n">sep</span><span class="o">+</span><span class="n">prefix</span><span class="o">+</span><span class="n">numdigits</span><span class="o">+</span><span class="s2">&quot;.&quot;</span><span class="o">+</span><span class="n">imgtype</span>
        <span class="n">fname</span> <span class="o">=</span> <span class="n">fname</span><span class="o">%</span><span class="n">counter</span>

        <span class="c1"># Save the figure using the just generated filename</span>
        <span class="n">figobj</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>

    <span class="c1"># User wants to generate a movie consisting of imgtyp-files in a directory savedir</span>
    <span class="k">else</span><span class="p">:</span>

        <span class="c1"># Check if there are any files to process in savedir, if not raise an error</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">filelist</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">errormsg</span> <span class="o">=</span> <span class="s2">&quot;No </span><span class="si">%s</span><span class="s2">-images found in directory </span><span class="si">%s</span><span class="s2">! Aborting...&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">imgtype</span><span class="p">,</span><span class="n">savedir</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">errormsg</span><span class="p">)</span>

        <span class="c1"># This is the standard command used to generate the movie</span>
        <span class="n">command</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;mencoder&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;mf://*.png&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;-mf&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;type=png:w=800:h=600:fps=25&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;-ovc&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;lavc&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;-lavcopts&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;vcodec=mpeg4&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;-oac&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;copy&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;-o&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;output.avi&quot;</span><span class="p">]</span>

        <span class="c1"># Make necessary changes here (like pointing to the right savedir, imgtype, movie,...)</span>
        <span class="n">command</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>  <span class="o">=</span> <span class="s2">&quot;mf://&quot;</span><span class="o">+</span><span class="n">savedir</span><span class="o">+</span><span class="n">os</span><span class="o">.</span><span class="n">sep</span><span class="o">+</span><span class="s2">&quot;*.&quot;</span><span class="o">+</span><span class="n">imgtype</span>
        <span class="n">command</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>  <span class="o">=</span> <span class="s2">&quot;type=&quot;</span><span class="o">+</span><span class="n">imgtype</span><span class="o">+</span><span class="s2">&quot;:w=800:h=600:fps=&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">fps</span><span class="p">)</span>
        <span class="n">command</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">movie</span><span class="o">+</span><span class="s2">&quot;.&quot;</span><span class="o">+</span><span class="n">movtype</span>

        <span class="c1"># Call mencoder to generate movie</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">command</span><span class="p">))</span>

        <span class="c1"># If we have been called using the default savedir, erase it (and its contents)</span>
        <span class="k">if</span> <span class="n">keepimgs</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">glob</span><span class="p">(</span><span class="n">savedir</span><span class="o">+</span><span class="n">os</span><span class="o">.</span><span class="n">sep</span><span class="o">+</span><span class="s2">&quot;*&quot;</span><span class="o">+</span><span class="n">imgtype</span><span class="p">):</span>
                <span class="n">os</span><span class="o">.</span><span class="n">unlink</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">rmdir</span><span class="p">(</span><span class="n">savedir</span><span class="p">)</span>

        <span class="c1"># If not don&#39;t erase it but (try to) move the generated movie into this savedir</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">movie</span><span class="o">+</span><span class="s2">&quot;.&quot;</span><span class="o">+</span><span class="n">movtype</span><span class="p">,</span><span class="n">savedir</span><span class="o">+</span><span class="n">os</span><span class="o">.</span><span class="n">sep</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
               <span class="nb">print</span> <span class="s2">&quot;</span><span class="se">\n\n\n</span><span class="s2">WARNING: Movie </span><span class="si">%s</span><span class="s2"> already exists in directory </span><span class="si">%s</span><span class="s2">. I won&#39;t move it there but keep it here. &quot;</span><span class="o">%</span><span class="p">(</span><span class="n">movie</span><span class="p">,</span><span class="n">savedir</span><span class="p">)</span></div>
</pre></div>

      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        <a class="uplink" href="../index.html">Contents</a>
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2012-2017, Stefan Fuertinger.
      Last updated on Sep 21, 2017.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.6.
    </div>
  </body>
</html>